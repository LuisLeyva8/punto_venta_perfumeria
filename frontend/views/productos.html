<link rel="stylesheet" href="/frontend/css/produtos.css" />

<section class="productos-panel">
  <h2>Nuevo Producto</h2>

  <form id="formProducto">
    <div class="grupo-form">
      <label for="codigo">Código de Barras</label>
      <input type="text" id="codigo" name="codigo">
    </div>

    <div class="grupo-form">
      <label for="descripcion">Descripción</label>
      <input type="text" id="descripcion" name="descripcion">
    </div>

    <!-- Tipo de venta -->
    <div class="grupo-form">
      <label>Tipo de Venta</label>
      <div class="radios">
        <label><input type="radio" name="tipoVenta" value="unidad" checked> Por Unidad/Pza</label>
        <label><input type="radio" name="tipoVenta" value="granel"> A Granel (Decimales)</label>
      </div>
    </div>

    <!-- Select de tipo de granel -->
    <div class="grupo-form" id="opcionesGranel" style="display: none;">
      <label for="unidadGranel"><strong>Tipo de granel</strong></label><br>
      <select id="unidadGranel" name="unidadGranel">
        <option value="ml">Mililitros (ml)</option>
        <option value="kg">Kilogramos (kg)</option>
      </select>
    </div>

    <!-- ¿Este producto pertenece a un kit? -->
    <div class="grupo-form">
      <label><input type="checkbox" id="esParteDeKit"> Este producto pertenece a un kit</label>
    </div>

    <div id="seleccionKit" class="grupo-form" style="display: none;">
      <label for="buscarKit">Buscar Kit (por código o nombre)</label>
      <input type="text" id="buscarKit" placeholder="Ej. KIT001 o Shampoo + Cepillo">
      <div id="resultadosKit" class="resultado-busqueda"></div>
      <button type="button" id="btnNuevoKit" class="secundario">+ Crear Nuevo Kit</button>
    </div>

    <!-- Modal para crear nuevo kit -->
    <div id="modalKit" class="modal" style="display: none;">
      <div class="modal-contenido">
        <h3>Crear Nuevo Kit</h3>
        <label for="codigoNuevoKit">Código</label>
        <input type="text" id="codigoNuevoKit">
        <label for="nombreNuevoKit">Nombre</label>
        <input type="text" id="nombreNuevoKit">
        <button type="button" id="guardarKit">Guardar Kit</button>
        <button type="button" id="cerrarModalKit">Cancelar</button>
      </div>
    </div>

    <div class="grupo-form">
      <label for="precioCosto">Precio Costo</label>
      <input type="number" id="precioCosto" name="precioCosto" step="0.01">
    </div>

    <div class="grupo-form">
      <label for="precioVenta">Precio Venta</label>
      <input type="number" id="precioVenta" name="precioVenta" step="0.01">
    </div>

    <div class="grupo-form">
      <label for="precioMayoreo">Precio Mayoreo</label>
      <input type="number" id="precioMayoreo" name="precioMayoreo" step="0.01">
    </div>

    <div class="grupo-form">
      <label for="departamento">Departamento</label>
      <div class="departamento-flex">
        <select id="departamento" name="departamento">
          <option value="">Sin Departamento</option>
        </select>
        <button type="button" class="secundario" onclick="abrirModalDepartamentos()">Administrar Departamentos</button>
      </div>
    </div>

    <fieldset class="inventario">
      <legend>Inventario</legend>
      <label><input type="checkbox" id="usaInventario" checked> Este producto SI utiliza inventario.</label>

      <div class="grupo-form">
        <label for="cantidad">Cantidad Actual</label>
        <input type="number" id="cantidad" name="cantidad" step="1">
      </div>

      <div class="grupo-form">
        <label for="minimo">Mínimo</label>
        <input type="number" id="minimo" name="minimo" step="1">
      </div>
    </fieldset>

    <div class="acciones-form">
      <button type="submit" class="btn-guardar">Guardar Producto</button>
      <button type="reset" class="btn-cancelar">Cancelar</button>
    </div>

    <div class="mensaje-status activo">
      <span>📦 Base de datos Pre-cargada ACTIVA</span>
    </div>
  </form>
</section>


<div id="modalDepartamentos" class="modal" style="display:none;">
  <div class="modal-contenido">
    <h2>NUEVO DEPARTAMENTO</h2>
    <input type="text" id="nuevoNombreDepartamento" placeholder="Nombre del departamento">
<button onclick="crearDepartamento()">Guardar</button>
  <button onclick="cerrarModalDepartamentos()">Cancelar</button>


    <h3>Listado</h3>
    <div id="listado-departamentos">
      <table id="tabla-departamentos" style="width: 100%; margin-top: 10px;">
        <thead>
          <tr>
            <th>Nombre del Departamento</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="cuerpoTablaDepartamentos">
          <!-- Se llena con JS -->
        </tbody>
      </table>      
  </div>

  <div id="acciones-departamento" style="display: none; margin-top: 10px;">
    <button onclick="editarDepartamento()">Editar</button>
    <button onclick="eliminarDepartamento()">Eliminar</button>
  </div>
</div>

<script src="/frontend/js/productos.js"></script>
